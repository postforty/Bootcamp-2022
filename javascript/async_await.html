<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <button onclick="getData()">조회</button>
    <script>
      // async/await 비동기 통신이 완벽히 끝날때까지 기다리겠다. 서버와 통신할 때 순차적으로 코드를 실행할때 주로사용한다. 데이터가 너무 많아서 아래 코드가 마냥 기다리게 하는 상황이 발생할 수 있다. 다음 코드가 받아온 데이터로만 실행이 가능할때 사용한다. 그렇지 않으면 데이터를 덜 받았더라도 나머지 코드가 실행되도록 해야한다. 상황에 따라 잘 사용해야 한다.
      // 비동기 함수를 동기함수 처럼 사용하게 만든다. xmlhttprequest, fetch, async await 서버와 통신할때 매우 중요한 내용이다.
      async function getData() {
        const res1 = await fetch("http://localhost:3000/posts"); //서버로 부터 값이 오기를 기다렸다가 res1에 넣겠다.
        const res1Json = await res1.json();
        // const res1Json = res1.json(); //Promise(res1Json에 배열이 들어오지 않은 상태)

        console.log(res1Json);
      }

      //   정적, 동적인것이 있는데 Ajax이전에는 서버에서 데이터가 오면 전체 화면을 갱신했다. Ajax와 promise이후에는 서버 데이터로 변경되는 부분만 변경된다. 이 부분에 대병렬처리가 가능해졌다.
      // async / awaits는 앞의 것에서 생긴 한계로 추가되었다.
    </script>
  </body>
</html>
